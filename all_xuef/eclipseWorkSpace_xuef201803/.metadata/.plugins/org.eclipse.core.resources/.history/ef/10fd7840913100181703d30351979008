<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>emps</title>
<%
	pageContext.setAttribute("emp_path", request.getContextPath());
%>

<!-- jQuery -->
<script src="${emp_path}/js/jquery-1.10.1.js"></script>
<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet"
	href="${emp_path}/css/bootstrap-3.3.7-dist/css/bootstrap.min.css" />
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="${emp_path}/css/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

</head>
<body>
	<div class="container">
		<!-- 标题 -->
		<div class="row">
		  	<div class="col-md-12"><h1>EmpsAdmS</h1></div>
		</div>
		
		<!-- 标题一般操作 -->
		<div class="row">
		  	<div class="col-md-4 col-md-offset-9"> <!-- col-md-offset-8 -->
		  		<button type="button" class="btn btn-primary"> 
		  			<span class="glyphicon glyphicon-plus"></span> Add </button>
		  		<button type="button" class="btn btn-danger"> 
		  			<span class="glyphicon glyphicon-remove"></span> Delete </button>
			</div>
		</div>
		<div class="row">
		  	<div class="col-md-12"><h4>******</h4></div>
		</div>
		<!-- 数据展示 -->
		<div class="row">
			<div class="col-md-12">
				<table class="table table-bordered table-hover" id="emps_table">
					<thead>
						<tr class="info">
							<th>工号</th>
							<th>姓名</th>
							<th>性别</th>
							<th>岗位</th>
							<th>部门</th>
							<th>地点</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
					
					</tbody>
				</table>
			</div>
		</div>
		
		<!-- 分页信息 -->
		<div class="row">
			<div class="col-md-6" id="page_info">
				
			</div>
			<div class="col-md-6">
			</div>
		</div>
	</div>
	<!-- 页面加载完成后 -->
	<script type="text/javascript">
		$(function(){
			$.ajax({
				url: "${emp_path}/emps",
				type: "get",
				data: "pageNo=1",
				success: function(res){
					//console.log(res)
					build_emps(res)
					build_page_info(res)
					build_page_nav(res)
				}
			})
		})
		function build_emps(res){
			var emps = res.res.pageInfo.list
			$.each(emps, function(index, item){
				//alert(item.eName + ": " + item.eNo)
				var eNoTd = $("<td></td>").append(item.eNo)
				var eNameTd = $("<td></td>").append(item.eName)
				var eGenderTd = $("<td></td>").append(item.eGender=="m"?"男":"女")
				var eJobTd = $("<td></td>").append(item.eJob)
				var deptNameTd = $("<td></td>").append(item.department.dName)
				var deptLocTd = $("<td></td>").append(item.department.dLocation)
				var opeTd = $("<td></td>").append("<button type='button' class='btn btn-primary btn-sm'>" + 
						"<span class='glyphicon glyphicon-pencil'></span> Edit </button>" + 
						" <button type='button' class='btn btn-danger btn-sm'>" + 
						"<span class='glyphicon glyphicon-remove'></span> DeL </button>");
				
				$("<tr></tr>").append(eNoTd).append(eNameTd).append(eGenderTd)
							  .append(eJobTd).append(deptNameTd).append(deptLocTd)
							  .append(opeTd)
							  .appendTo("#emps_table tbody")
			})
		}
		function build_page_info(res){
			
		}
		function build_page_nav(res){
			
		}
	</script>
</body>
</html>