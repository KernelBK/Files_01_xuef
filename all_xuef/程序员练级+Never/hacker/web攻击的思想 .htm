<div class="RichContent-inner"><span class="RichText ztext CopyrightRichText-richText" itemprop="text"><p>早期的互联网非常的单调，一般只有静态页面，现在，随着技术的发展，web上大多数站点实际上是web应用程序，在服务器和浏览器之间进行双向的信息传递。他们支持注册登录，金融交易，搜索及用户创作的内容。用户只需要拥有一个浏览器，就能实现各种功能。<br></p><p>Web 是指一个网站的前端页面到后端服务，比如我们常见的 Javascript、PHP、Python、Mysql、jQuery、Docker 等，包括开发、运维这些服务。 <br></p><p>所以在我看来 Web 安全也就是从安全的角度探索 Web 的一种方式。<br></p><p>为了能够更简单的理解一些常见漏洞，我们首先来看一下这份试卷：<br></p><blockquote><b>试卷</b> <b>考生姓名：</b>__________<br><b>考生学号：</b>__________<br><br><b>一、诗歌补写</b><br>床前没月光，___________。<br>春眠不觉晓，___________。<br><br><b>二、数学运算（在括号内填入数字）</b><br>3 500 +400 * 3 / 2 + 1 = （ ）<br>4 ( 1 + 2) / 3 * 400 +500 = （ ）</blockquote><p><b>考生姓名：</b>__________</p><p><b>考生学号：</b>__________</p><p>首先我们来看这个，试卷的名字和编号填写，这个部分有“漏洞”吗？有</p><p>学生的姓名和编号都写在这儿，没有做任何保护措施，因此，你只要偷看了某人的试卷上的这部分内容，然后把你的试卷的上的姓名和考生编码写成和他一样的即可伪装出他的身份。</p><p>漏洞攻击成功 <br><br></p><p><b>一、诗歌补写</b><br>床前没月光，___________。<br>春眠不觉晓，___________。</p><p>这道题有漏洞吗？有</p><p>这道题的答案本来应该是“疑似地上霜”和“处处闻啼鸟”</p><p>But，问题中，并没有规定答案里不能添加标点符号，所以，我完全可以把“疑是地上霜，举头望明月，低头思故乡”以及“处处闻啼鸟，夜来风雨声，花落知多少”当做答案写进去。</p><p>漏洞再次进攻成功：P</p><p><br></p><p><b>二、数学运算（在括号内填入数字）</b></p><p>3 500 +400 * 3 / 2 + 1 = （ ）</p><p>4 ( 1 + 2) / 3 * 400 +500 = （ ）</p><p>这个问题有漏洞吗？有</p><p>出题者规定了只能填入数字，但却没有说是什么数字，也没有规定多少位，那么我的答案可以是<br>中文数字「壹佰壹拾圆」、罗马数字「MCI」或「0000000000001101」。</p><p>漏洞第三次进攻成功 XXD <br></p><p>这份试卷简单的模拟了Web漏洞的攻击思想，在实际中，我们打开一个网页提交登录或者是搜索都会经过服务器做的一系列处理又回到浏览器，在这个过程中我们提交的数据会被带入到一系列的填空题中，有的是我们能猜到的，有的则是意想不到的，有的会经过SQL查询进行填空，有的会被带入到命令行中进行执行，最后又把结果返回给浏览器进行填空，也就是最后我们看到的结果。</p><p><br></p><p>在数据的传输中，我们可以把 web 简单的分为几个层次： </p><ol><li>浏览器：浏览器即客户端，提供客户端和服务器端的数据信息交互。</li><li>http：客户端与web服务器进行交互时就存在web请求，这种请求都基于统一的应用层协议——HTTP协议来交互数据。http属于轻量级协议，无需连接，提供了对通信错误的容错性。</li><li>中间件：中间件是位于平台（硬件和操作系统）和应用之间的通用服务</li><li>Server容器：Server容器负责解析用户请求和脚本语言，类似的有Tomcat，JBoss等。我们访问网页看到是web容器处理后的内容。</li><li>数据库：动态页面可提供交互式的信息查询服务，主要依赖于web数据库的实现，对外提供包含 <a href="https://link.zhihu.com/?target=http%3A//www.baike.com/sowiki/%25E8%25A1%25A8%25E5%258D%2595%3Fprd%3Dcontent_doc_search" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">表单</a>的Web页面作为访问接口，查询结果也以包含数据列表的Web页面形式返回给用户。</li></ol><p>当然除了这些数据也有可能流向不些不可见的第三方服务商。<br></p><p><br></p><p><b>下图就展示了数据的传输流程，以及不同阶段经常出现的漏洞及其原因:</b></p><figure><noscript><img src="https://pic4.zhimg.com/v2-5bd236dc5764a4992e952e2e2b8ff8d7_b.png" data-rawwidth="1728" data-rawheight="816" class="origin_image zh-lightbox-thumb" width="1728" data-original="https://pic4.zhimg.com/v2-5bd236dc5764a4992e952e2e2b8ff8d7_r.jpg"></noscript><img src="https://pic4.zhimg.com/80/v2-5bd236dc5764a4992e952e2e2b8ff8d7_hd.png" data-rawwidth="1728" data-rawheight="816" class="origin_image zh-lightbox-thumb lazy" width="1728" data-original="https://pic4.zhimg.com/v2-5bd236dc5764a4992e952e2e2b8ff8d7_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-5bd236dc5764a4992e952e2e2b8ff8d7_b.png"></figure><p><br></p><p>我们常见的Web漏洞类型主要有SQL注入、XSS、远程命令执行以及越权等。以下我们分别用举例的形式为大家介绍这几种漏洞。<br></p><p><b>（SQL注入）</b></p><p>所谓SQL注入，就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。</p><ol><li>select * from username = ____ and password=_____</li><li>select * from username   "<b>test" or ""="</b>" and password="123456"</li></ol><p><b>（XSS）</b></p><p>XSS则是攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。</p><ol><li>&lt;p style='color:red'&gt;你好啊，尊敬的______&lt;p&gt;</li><li>&lt;p style='color:red'&gt;你好啊，尊敬的 xxx&lt;script&gt;alert(1)&lt;/script&gt;&lt;p&gt;</li></ol><p><b>(远程命令执行)</b></p><p>而远程命令执行，是用户通过浏览器提交执行命令，由于服务器端没有针对执行函数做过滤，导致执行命令。</p><ol><li>ping  _______ </li><li>ping <b><a href="https://link.zhihu.com/?target=http%3A//www.baidu.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">www.baidu.com</a> &amp; wget xxxxxxxxxxx</b></li></ol><p><b>（越权）</b></p><p>越权漏洞是比较常见的漏洞类型，越权漏洞可以理解为，一个正常的用户A通常只能够对自己的一些信息进行增删改查，但是由于程序员的一时疏忽 ，对信息进行增删改查的时候没有进行一个判断，判断所需要操作的信息是否属于对应的用户，可以导致用户A可以操作其他人的信息。</p><ol><li>Cookie: uid=11426;</li><li>Cookie: uid=<b>1</b>;</li></ol><p>关于越权，就像我们刚刚试卷体中的姓名部分。</p><p><br></p><p>再展示一个数据的传输流程图，以便直观清晰的看到，数据在各层中是怎样运作的，以及可能发生的漏洞：</p><figure><noscript><img src="https://pic2.zhimg.com/v2-fecccfbdbeb0f916925d4fd4b07f2b05_b.png" data-rawwidth="1728" data-rawheight="816" class="origin_image zh-lightbox-thumb" width="1728" data-original="https://pic2.zhimg.com/v2-fecccfbdbeb0f916925d4fd4b07f2b05_r.jpg"></noscript><span><div class="VagueImage origin_image zh-lightbox-thumb" data-src="https://pic2.zhimg.com/80/v2-fecccfbdbeb0f916925d4fd4b07f2b05_hd.png" style="width: 654px; height: 308.833px;"><div class="VagueImage-mask is-active"></div></div></span></figure><p><br></p><p>了解了这几个漏洞之后我们可以看到原理都有些类似，也很简单，当然我们只要不再局限于概念名词就会发现 web 安全的大部分漏洞都很简单。更多时候，发现一个复杂的漏洞需要是只是耐心。<br><br>概念，不是一个神圣的东西，概念很多时候只是bullshit。很多概念的产生是因为需要认识和概括某种存在着的现象而不得已产生的，概念也许是必须的但并不是必然如此的。<br></p><p>换句话说，概念仅可以被看做是一种努力尝试描述后的结果之一。或者也可以说概念是提出这个概念的人自嗨的产物，跟其他人关系不大。甚至，有些概念是‘别有用心’的发明来合理化某种其实不必合理化但是存在的现象。<br></p><p>所以不要把自己拘泥于一个这样的概念中来思考所面临问题的实质。把概念忘了，你才可能看清楚你和事物本身的关系。</p><p><br></p><p><b>完全没有基础我该从哪下手？<br><br></b>完全没有基础学习 Web 安全是件比较难的事情，所以我给出的最小的方案和最少的建议。</p><ol><li>工具</li><ol><li>先用 AWVS 扫几个测试网站大体了解一下</li><ol><li><a href="https://link.zhihu.com/?target=http%3A//testphp.vulnweb.com/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">http://</span><span class="visible">testphp.vulnweb.com/</span><span class="invisible"></span></a></li><li><a href="https://link.zhihu.com/?target=http%3A//testhtml5.vulnweb.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">http://testhtml5.vulnweb.com</a></li><li><a href="https://link.zhihu.com/?target=http%3A//testasp.vulnweb.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">http://testasp.vulnweb.com</a></li><li><a href="https://link.zhihu.com/?target=http%3A//testaspnet.vulnweb.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">http://testaspnet.vulnweb.com</a></li></ol><li>把扫到的漏洞复现，了解怎么利用，主要了解：</li><ol><li>XSS</li><li>SQL 注入</li><li>远程代码执行</li></ol></ol><li>开发</li><ol><li>书籍</li><ol><li>《细说 PHP》</li></ol><li>实践</li><ol><li>使用 PHP 写一个列目录的脚本，可以通过参数列出任意目录的列表</li><li>使用 PHP 抓取一个网页的内容并输出</li><li>使用 PHP 抓取一个网页的内容并写入到Mysql数据库再输出</li></ol></ol><li>安全</li><ol><li>实践</li><ol><li>手工找 <a href="https://link.zhihu.com/?target=http%3A//testphp.vulnweb.com/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">http://</span><span class="visible">testphp.vulnweb.com/</span><span class="invisible"></span></a> 的漏洞，对比 AWVS 的结果</li></ol><li>书籍</li><ol><li>《黑客攻防---web安全实战详解》</li><li>《安全之路：Web渗透技术及实战案例解析（第2版）》</li><li>还是看不懂就找自己能看得进的 Web 安全的书</li></ol></ol></ol><p><br></p><p><b>探索资源，我在研究和学习的过程中更加好的资源和工具来帮助我们成长和解决问题？<br><br></b>平时我们安装一个mysql，要先到处找安装包，再一步步配置，运行，还不知道装哪了。开机就自动启动了，用了 docker 后再也没这个烦恼拉，一行命令，或者是在Kitematic界面上点一下就运行拉。</p><ol><li>Github <a href="https://link.zhihu.com/?target=https%3A//www.github.com/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">https://www.github.com</a> </li><ol><li>搜索 awesome-xxx</li><ol><li>举例</li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/enaqx/awesome-pentest" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/enaqx/awesom</span><span class="invisible">e-pentest</span><span class="ellipsis"></span></a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/alebcay/awesome-shell" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/alebcay/awes</span><span class="invisible">ome-shell</span><span class="ellipsis"></span></a></li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Dawesome" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/search?</span><span class="invisible">utf8=%E2%9C%93&amp;q=awesome</span><span class="ellipsis"></span></a>-</li></ol><li>找到大牛的 github 看 stars，也就是收藏的项目</li><ol><li><a href="https://link.zhihu.com/?target=https%3A//github.com/flankerhqd%3Ftab%3Dstars" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/flankerhqd?</span><span class="invisible">tab=stars</span><span class="ellipsis"></span></a> 移动安全</li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/orangetw%3Ftab%3Dstars" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/orangetw?</span><span class="invisible">tab=stars</span><span class="ellipsis"></span></a> WEB 安全、CTF</li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/EtherDream%3Ftab%3Dstars" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/EtherDream?</span><span class="invisible">tab=stars</span><span class="ellipsis"></span></a> 前端安全</li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/l3m0n%3Ftab%3Dstars" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/l3m0n?</span><span class="invisible">tab=stars</span><span class="ellipsis"></span></a> 渗透测试、内网安全</li><li><a href="https://link.zhihu.com/?target=https%3A//github.com/ring04h%3Ftab%3Dstars" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/ring04h?</span><span class="invisible">tab=stars</span><span class="ellipsis"></span></a> 安全开发</li></ol><li>探索频道 <a href="https://link.zhihu.com/?target=https%3A//github.com/explore" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/explore</span><span class="invisible"></span></a> </li><ol><li>主要是一些有趣的新潮的项目</li><li>当然也有安全相关的啦 <a href="https://link.zhihu.com/?target=https%3A//github.com/showcases/security" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/showcases/se</span><span class="invisible">curity</span><span class="ellipsis"></span></a></li></ol><li>趋势 <a href="https://link.zhihu.com/?target=https%3A//github.com/trending/developers" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">github.com/trending/dev</span><span class="invisible">elopers</span><span class="ellipsis"></span></a></li><li>善用收藏</li></ol><li>Docker hub <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/</span><span class="invisible"></span></a> ，用于查找已经封装好的环境，减少装环境带来的麻烦</li></ol><p>举例：</p><ol><li>数据库 Mysql <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/_/mysql/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/_/mysql/</span><span class="invisible"></span></a><br>一句话安装运行：docker run -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:latest</li><li>XSS攻击平台BeeF <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/janes/beef/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/r/janes/</span><span class="invisible">beef/</span><span class="ellipsis"></span></a> 一句话安装运行：docker run --rm -p 3000:3000 janes/beef</li><li>Kali 渗透测试 Linux 系统 <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/kalilinux/kali-linux-docker/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/r/kalili</span><span class="invisible">nux/kali-linux-docker/</span><span class="ellipsis"></span></a></li><li>漏洞靶场 <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/citizenstig/dvwa/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/r/citize</span><span class="invisible">nstig/dvwa/</span><span class="ellipsis"></span></a> 一句话安装运行：docker run -d -p 80:80 citizenstig/dvwa</li><li>Nmap <a href="https://link.zhihu.com/?target=https%3A//hub.docker.com/r/uzyexe/nmap/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">https://</span><span class="visible">hub.docker.com/r/uzyexe</span><span class="invisible">/nmap/</span><span class="ellipsis"></span></a><br>一句话安装运行：docker run --rm uzyexe/nmap -p 80 http://example.com</li><li>搜索通用漏洞靶场，关键字：cve-</li><li>安全相关的 Paper</li><ol><li><a href="https://link.zhihu.com/?target=http%3A//paper.seebug.org/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">http://</span><span class="visible">paper.seebug.org/</span><span class="invisible"></span></a></li><li><a href="https://link.zhihu.com/?target=http%3A//bobao.360.cn/learning/index" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">http://bobao.360.cn/learning/inde</a>x</li><li><a href="https://link.zhihu.com/?target=https%3A//wooyun.js.org/" class=" wrap external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043">乌云 Drops 文章在线浏览</a></li><li><a href="https://link.zhihu.com/?target=http%3A//wiki.ioin.in/" class=" external" target="_blank" rel="nofollow noreferrer" data-za-detail-view-id="1043"><span class="invisible">http://</span><span class="visible">wiki.ioin.in/</span><span class="invisible"></span></a></li></ol></ol><p>挖漏洞应该是一件快乐的事情，当你把挖漏洞的目的从单纯的挣钱和声望再丰富一些，你会发现收益的重要性可能远小于心情愉快。慢慢的变成一种良性循环，让你走的更远。</p><p>天空才是你的尽头，呵呵嗒 ^_^</p></span></div>