{匿名函数捕获变量值的机制}

#匿名函数捕获变量值的机制

## 自由变量是运行时绑定值的

```
>>> x = 10
>>> a = lambda y: x + y
>>> x = 20
>>> b = lambda y: x + y

>>> a(10)
30
>>> b(10)
30
>>>
```

其中的奥妙在于lambda表达式中的x是一个自由变量， 在运行时绑定值，而不是定义时就绑定，这跟函数的默认值参数定义是不同的。 

## 默认参数在定义时绑定值

如果你想让某个匿名函数在定义时就捕获到值，可以将那个参数值定义成默认参数即可，就像下面这样：

```
>>> x = 10
>>> a = lambda y, x=x: x + y
>>> x = 20
>>> b = lambda y, x=x: x + y
>>> a(10)
20
>>> b(10)
30
>>>
```

## 参考

- 《Python3-Cookbook》